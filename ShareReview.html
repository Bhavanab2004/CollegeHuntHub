<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Share Your Review - CampusHunt</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #e6ccff, #f8f0ff);
      font-family: 'Poppins', sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .review-box {
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
      max-width: 500px;
      width: 100%;
    }
    h2 {
      text-align: center;
      color: #4b0082;
      margin-bottom: 20px;
    }
    label {
      font-weight: 500;
      margin-top: 10px;
    }
    .btn-submit {
      background-color: #6f42c1;
      color: white;
      border: none;
      margin-top: 20px;
      width: 100%;
    }
    .btn-submit:hover {
      background-color: #5a32a3;
    }
  </style>
</head>

<body>

<div class="review-box">
  <h2>Share Your College Review</h2>

  <form id="reviewForm">

    <label>Select Course</label>
    <select id="course" class="form-select" required onchange="updateColleges()">
      <option value="">-- Select Course --</option>
      <option>MBA</option>
      <option>MCA</option>
      <option>BCA</option>
      <option>BBA</option>
      <option>MTech</option>
    </select>

    <label>Select College</label>
    <select id="college" class="form-select" required>
      <option value="">-- Select College --</option>
    </select>

    <label>Your Name</label>
    <input type="text" id="name" class="form-control" required>

    <label>Batch / Year</label>
    <input type="text" id="year" class="form-control" required>

    <label>Your Review</label>
    <textarea id="review" class="form-control" rows="3" required></textarea>

    <button type="submit" class="btn btn-submit">Submit Review</button>

  </form>
</div>

<!-- ðŸ”¥ Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
  // ðŸ”¥ Firebase Configuration (PASTE YOUR REAL VALUES)
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_BUCKET",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  // ðŸ”¥ Initialize Firebase (ONLY ONCE)
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // ðŸŽ“ College Data
  const collegeData = {
    MBA: ["IIM Bangalore", "Christ University", "PES University"],
    MCA: ["RVCE", "BMSCE", "MSRIT", "Christ University"],
    BCA: ["Christ University", "Jain University"],
    BBA: ["Christ University", "NMIMS"],
    MTech: ["IISc", "RVCE", "BMSCE"]
  };

  function updateColleges() {
    const course = document.getElementById("course").value;
    const collegeSelect = document.getElementById("college");
    collegeSelect.innerHTML = '<option value="">-- Select College --</option>';

    if (collegeData[course]) {
      collegeData[course].forEach(college => {
        const option = document.createElement("option");
        option.value = college;
        option.textContent = college;
        collegeSelect.appendChild(option);
      });
    }
  }

  // âœ… FIRESTORE FORM SUBMIT
  document.getElementById("reviewForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const course = course.value;
    const college = college.value;
    const name = document.getElementById("name").value;
    const year = document.getElementById("year").value;
    const review = document.getElementById("review").value;

    if (!course || !college || !name || !year || !review) {
      alert("Please fill all fields");
      return;
    }

    db.collection("reviews").add({
      course,
      college,
      name,
      year,
      review,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    })
    .then(() => {
      alert("Review submitted successfully!");
      document.getElementById("reviewForm").reset();
    })
    .catch(error => {
      console.error("Firestore Error:", error);
      alert("Error submitting review");
    });
  });
</script>

</body>
</html>
